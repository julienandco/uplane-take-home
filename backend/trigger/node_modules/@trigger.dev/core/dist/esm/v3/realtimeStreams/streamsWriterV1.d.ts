import { StreamsWriter } from "./types.js";
export type StreamsWriterV1Options<T> = {
    baseUrl: string;
    runId: string;
    key: string;
    source: ReadableStream<T>;
    headers?: Record<string, string>;
    signal?: AbortSignal;
    version?: string;
    target?: "self" | "parent" | "root";
    maxRetries?: number;
    maxBufferSize?: number;
    clientId?: string;
};
export declare class StreamsWriterV1<T> implements StreamsWriter {
    private options;
    private controller;
    private serverStream;
    private consumerStream;
    private streamPromise;
    private retryCount;
    private readonly maxRetries;
    private currentChunkIndex;
    private readonly baseDelayMs;
    private readonly maxDelayMs;
    private readonly maxBufferSize;
    private readonly clientId;
    private ringBuffer;
    private bufferStartIndex;
    private highestBufferedIndex;
    private streamReader;
    private bufferReaderTask;
    private streamComplete;
    constructor(options: StreamsWriterV1Options<T>);
    private generateClientId;
    private startBuffering;
    private makeRequest;
    private initializeServerStream;
    wait(): Promise<void>;
    [Symbol.asyncIterator](): AsyncIterableIterator<T>;
    private buildUrl;
    private isRetryableError;
    private isRetryableStatusCode;
    private delay;
    private calculateBackoffDelay;
    private addToRingBuffer;
    private getChunksFromBuffer;
    private queryServerLastChunkIndex;
}
