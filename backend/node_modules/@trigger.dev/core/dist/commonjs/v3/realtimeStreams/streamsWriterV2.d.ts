import { StreamsWriter } from "./types.js";
export type StreamsWriterV2Options<T = any> = {
    basin: string;
    stream: string;
    accessToken: string;
    source: ReadableStream<T>;
    signal?: AbortSignal;
    flushIntervalMs?: number;
    maxRetries?: number;
    debug?: boolean;
    maxQueuedBytes?: number;
};
/**
 * StreamsWriterV2 writes metadata stream data directly to S2 (https://s2.dev).
 *
 * Features:
 * - Direct streaming: Uses S2's appendSession for efficient streaming
 * - Automatic batching: Uses BatchTransform to batch records
 * - No manual buffering: S2 handles buffering internally
 * - Debug logging: Enable with debug: true to see detailed operation logs
 *
 * Example usage:
 * ```typescript
 * const stream = new StreamsWriterV2({
 *   basin: "my-basin",
 *   stream: "my-stream",
 *   accessToken: "s2-token-here",
 *   source: myAsyncIterable,
 *   flushIntervalMs: 200, // Optional: batch linger duration in ms
 *   debug: true, // Optional: enable debug logging
 * });
 *
 * // Wait for streaming to complete
 * await stream.wait();
 *
 * // Or consume the stream
 * for await (const value of stream) {
 *   console.log(value);
 * }
 * ```
 */
export declare class StreamsWriterV2<T = any> implements StreamsWriter {
    private options;
    private s2Client;
    private serverStream;
    private consumerStream;
    private streamPromise;
    private readonly flushIntervalMs;
    private readonly debug;
    private readonly maxQueuedBytes;
    private aborted;
    private sessionWritable;
    constructor(options: StreamsWriterV2Options<T>);
    private handleAbort;
    private initializeServerStream;
    wait(): Promise<void>;
    [Symbol.asyncIterator](): AsyncIterableIterator<T>;
    private log;
    private logError;
}
