import { WorkloadHeartbeatRequestBody, WorkloadRunAttemptCompleteRequestBody, WorkloadRunAttemptStartRequestBody, WorkloadDebugLogRequestBody } from "./schemas.js";
import { WorkloadClientCommonOptions } from "./types.js";
type WorkloadHttpClientOptions = WorkloadClientCommonOptions;
export declare class WorkloadHttpClient {
    private opts;
    private apiUrl;
    private runnerId;
    private readonly deploymentId;
    constructor(opts: WorkloadHttpClientOptions);
    updateApiUrl(apiUrl: string): void;
    updateRunnerId(runnerId: string): void;
    defaultHeaders(): Record<string, string>;
    private isConnectionError;
    private withConnectionErrorDetection;
    heartbeatRun(runId: string, snapshotId: string, body?: WorkloadHeartbeatRequestBody): Promise<{
        success: false;
        error: string;
        isConnectionError?: boolean;
    } | {
        success: true;
        data: {
            ok: true;
        };
    }>;
    suspendRun(runId: string, snapshotId: string): Promise<import("../../zodfetch.js").ApiResult<{
        ok: true;
    } | {
        error: string;
        ok: false;
    }>>;
    continueRunExecution(runId: string, snapshotId: string): Promise<{
        success: false;
        error: string;
        isConnectionError?: boolean;
    } | {
        success: true;
        data: {
            run: {
                status: import("../../index.js").TaskRunStatus;
                id: string;
                friendlyId: string;
                attemptNumber?: number | null | undefined;
                taskEventStore?: string | undefined;
            };
            snapshot: {
                id: string;
                createdAt: Date;
                description: string;
                friendlyId: string;
                executionStatus: import("../../index.js").TaskRunExecutionStatus;
            };
        };
    }>;
    startRunAttempt(runId: string, snapshotId: string, body: WorkloadRunAttemptStartRequestBody): Promise<import("../../zodfetch.js").ApiResult<{
        run: {
            status: import("../../index.js").TaskRunStatus;
            id: string;
            friendlyId: string;
            attemptNumber?: number | null | undefined;
            taskEventStore?: string | undefined;
        };
        snapshot: {
            id: string;
            createdAt: Date;
            description: string;
            friendlyId: string;
            executionStatus: import("../../index.js").TaskRunExecutionStatus;
        };
    } & {
        execution: {
            run: {
                payload: string;
                id: string;
                payloadType: string;
                tags: string[];
                isTest: boolean;
                createdAt: Date;
                startedAt: Date;
                metadata?: Record<string, import("../../../index.js").DeserializedJson> | undefined;
                idempotencyKey?: string | undefined;
                idempotencyKeyScope?: "run" | "attempt" | "global" | undefined;
                maxAttempts?: number | undefined;
                version?: string | undefined;
                maxDuration?: number | undefined;
                priority?: number | undefined;
                baseCostInCents?: number | undefined;
                parentTaskRunId?: string | undefined;
                rootTaskRunId?: string | undefined;
                durationMs?: number | undefined;
                costInCents?: number | undefined;
                region?: string | undefined;
            } & {
                traceContext?: Record<string, unknown> | undefined;
                realtimeStreamsVersion?: string | undefined;
            };
            attempt: {
                number: number;
                startedAt: Date;
            } & {
                [k: string]: unknown;
            };
            task: {
                id: string;
                filePath: string;
            } & {
                [k: string]: unknown;
            };
            queue: {
                name: string;
                id: string;
            };
            environment: {
                type: "PRODUCTION" | "STAGING" | "DEVELOPMENT" | "PREVIEW";
                id: string;
                slug: string;
                branchName?: string | undefined;
                git?: {
                    dirty?: boolean | undefined;
                    source?: "trigger_github_app" | "github_actions" | "local" | undefined;
                    provider?: string | undefined;
                    ghUsername?: string | undefined;
                    ghUserAvatarUrl?: string | undefined;
                    commitAuthorName?: string | undefined;
                    commitMessage?: string | undefined;
                    commitRef?: string | undefined;
                    commitSha?: string | undefined;
                    remoteUrl?: string | undefined;
                    pullRequestNumber?: number | undefined;
                    pullRequestTitle?: string | undefined;
                    pullRequestState?: "open" | "closed" | "merged" | undefined;
                } | undefined;
            };
            organization: {
                name: string;
                id: string;
                slug: string;
            };
            project: {
                name: string;
                id: string;
                slug: string;
                ref: string;
            };
            machine: {
                cpu: number;
                memory: number;
                name: "micro" | "small-1x" | "small-2x" | "medium-1x" | "medium-2x" | "large-1x" | "large-2x";
                centsPerMs: number;
            };
            batch?: {
                id: string;
            } | undefined;
            deployment?: {
                id: string;
                version: string;
                shortCode: string;
                runtime: string;
                runtimeVersion: string;
                git?: {
                    dirty?: boolean | undefined;
                    source?: "trigger_github_app" | "github_actions" | "local" | undefined;
                    provider?: string | undefined;
                    ghUsername?: string | undefined;
                    ghUserAvatarUrl?: string | undefined;
                    commitAuthorName?: string | undefined;
                    commitMessage?: string | undefined;
                    commitRef?: string | undefined;
                    commitSha?: string | undefined;
                    remoteUrl?: string | undefined;
                    pullRequestNumber?: number | undefined;
                    pullRequestTitle?: string | undefined;
                    pullRequestState?: "open" | "closed" | "merged" | undefined;
                } | undefined;
            } | undefined;
        };
    } & {
        envVars: Record<string, string>;
    }>>;
    completeRunAttempt(runId: string, snapshotId: string, body: WorkloadRunAttemptCompleteRequestBody): Promise<import("../../zodfetch.js").ApiResult<{
        result: {
            attemptStatus: "RUN_FINISHED" | "RUN_PENDING_CANCEL" | "RETRY_QUEUED" | "RETRY_IMMEDIATELY";
        } & {
            run: {
                status: import("../../index.js").TaskRunStatus;
                id: string;
                friendlyId: string;
                attemptNumber?: number | null | undefined;
                taskEventStore?: string | undefined;
            };
            snapshot: {
                id: string;
                createdAt: Date;
                description: string;
                friendlyId: string;
                executionStatus: import("../../index.js").TaskRunExecutionStatus;
            };
        };
    }>>;
    getSnapshotsSince(runId: string, snapshotId: string): Promise<{
        success: false;
        error: string;
        isConnectionError?: boolean;
    } | {
        success: true;
        data: {
            snapshots: {
                run: {
                    status: import("../../index.js").TaskRunStatus;
                    id: string;
                    friendlyId: string;
                    attemptNumber?: number | null | undefined;
                    taskEventStore?: string | undefined;
                };
                version: "1";
                snapshot: {
                    id: string;
                    createdAt: Date;
                    description: string;
                    friendlyId: string;
                    executionStatus: import("../../index.js").TaskRunExecutionStatus;
                };
                completedWaitpoints: {
                    type: import("../../index.js").WaitpointType;
                    id: string;
                    friendlyId: string;
                    completedAt: Date;
                    outputIsError: boolean;
                    idempotencyKey?: string | undefined;
                    output?: string | undefined;
                    outputType?: string | undefined;
                    index?: number | undefined;
                    completedByTaskRun?: {
                        id: string;
                        friendlyId: string;
                        batch?: {
                            id: string;
                            friendlyId: string;
                        } | undefined;
                    } | undefined;
                    completedAfter?: Date | undefined;
                    completedByBatch?: {
                        id: string;
                        friendlyId: string;
                    } | undefined;
                }[];
                batch?: {
                    id: string;
                    friendlyId: string;
                } | undefined;
                checkpoint?: {
                    type: import("../../index.js").CheckpointTypeEnum;
                    id: string;
                    friendlyId: string;
                    location: string;
                    imageRef?: string | null | undefined;
                    reason?: string | null | undefined;
                } | undefined;
            }[];
        };
    }>;
    sendDebugLog(runId: string, body: WorkloadDebugLogRequestBody): Promise<void>;
    /** @deprecated Not currently used */
    dequeue(): Promise<import("../../zodfetch.js").ApiResult<{
        run: {
            id: string;
            isTest: boolean;
            machine: {
                cpu: number;
                memory: number;
                name: "micro" | "small-1x" | "small-2x" | "medium-1x" | "medium-2x" | "large-1x" | "large-2x";
                centsPerMs: number;
            };
            traceContext: Record<string, unknown>;
            friendlyId: string;
            attemptNumber: number;
            masterQueue: string;
        };
        version: "1";
        environment: {
            type: "PRODUCTION" | "STAGING" | "DEVELOPMENT" | "PREVIEW";
            id: string;
        };
        organization: {
            id: string;
        };
        project: {
            id: string;
        };
        deployment: {
            id?: string | undefined;
            friendlyId?: string | undefined;
            imagePlatform?: string | undefined;
        };
        snapshot: {
            id: string;
            createdAt: Date;
            description: string;
            friendlyId: string;
            executionStatus: import("../../index.js").TaskRunExecutionStatus;
        };
        completedWaitpoints: {
            type: import("../../index.js").WaitpointType;
            id: string;
            friendlyId: string;
            completedAt: Date;
            outputIsError: boolean;
            idempotencyKey?: string | undefined;
            output?: string | undefined;
            outputType?: string | undefined;
            index?: number | undefined;
            completedByTaskRun?: {
                id: string;
                friendlyId: string;
                batch?: {
                    id: string;
                    friendlyId: string;
                } | undefined;
            } | undefined;
            completedAfter?: Date | undefined;
            completedByBatch?: {
                id: string;
                friendlyId: string;
            } | undefined;
        }[];
        dequeuedAt: Date;
        backgroundWorker: {
            id: string;
            version: string;
            friendlyId: string;
        };
        checkpoint?: {
            type: import("../../index.js").CheckpointTypeEnum;
            id: string;
            location: string;
            imageRef?: string | null | undefined;
            reason?: string | null | undefined;
        } | undefined;
        workerQueueLength?: number | undefined;
        image?: string | undefined;
        placementTags?: {
            key: string;
            values?: string[] | undefined;
        }[] | undefined;
    }[]>>;
}
export {};
