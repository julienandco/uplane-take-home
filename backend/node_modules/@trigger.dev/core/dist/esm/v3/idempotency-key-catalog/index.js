const API_NAME = "idempotency-key-catalog";
import { getGlobal, registerGlobal } from "../utils/globals.js";
import { LRUIdempotencyKeyCatalog } from "./lruIdempotencyKeyCatalog.js";
export class IdempotencyKeyCatalogAPI {
    static _instance;
    constructor() { }
    static getInstance() {
        if (!this._instance) {
            this._instance = new IdempotencyKeyCatalogAPI();
        }
        return this._instance;
    }
    registerKeyOptions(hash, options) {
        this.#getCatalog().registerKeyOptions(hash, options);
    }
    getKeyOptions(hash) {
        return this.#getCatalog().getKeyOptions(hash);
    }
    #getCatalog() {
        let catalog = getGlobal(API_NAME);
        if (!catalog) {
            // Auto-initialize with LRU catalog on first access
            catalog = new LRUIdempotencyKeyCatalog();
            registerGlobal(API_NAME, catalog, true);
        }
        return catalog;
    }
}
//# sourceMappingURL=index.js.map