"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.unsafeWipe = exports.value = exports.make = exports.proto = exports.redactedRegistry = void 0;
exports.redactedRegistry = new WeakMap();
const NodeInspectSymbol = Symbol.for("nodejs.util.inspect.custom");
exports.proto = {
    toString() {
        return "<redacted>";
    },
    toJSON() {
        return "<redacted>";
    },
    [NodeInspectSymbol]() {
        return "<redacted>";
    },
};
const make = (value) => {
    const redacted = Object.create(exports.proto);
    exports.redactedRegistry.set(redacted, value);
    return redacted;
};
exports.make = make;
const value = (self) => {
    if (exports.redactedRegistry.has(self)) {
        return exports.redactedRegistry.get(self);
    }
    else {
        throw new Error("Unable to get redacted value");
    }
};
exports.value = value;
const unsafeWipe = (self) => exports.redactedRegistry.delete(self);
exports.unsafeWipe = unsafeWipe;
//# sourceMappingURL=redacted.js.map