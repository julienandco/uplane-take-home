import type { AppendHeaders, AppendRecord as AppendRecordType } from "./lib/stream/types.js";
export type AppendRecord = AppendRecordType;
declare function appendRecordMake(body?: string, headers?: AppendHeaders<"string">, timestamp?: number): AppendRecord;
declare function appendRecordMake(body?: Uint8Array, headers?: AppendHeaders<"bytes">, timestamp?: number): AppendRecord;
declare function appendRecordCommand(command: string, body?: string, timestamp?: number): AppendRecord;
declare function appendRecordCommand(command: Uint8Array, body?: Uint8Array, timestamp?: number): AppendRecord;
/**
 * Helpers to construct appendable records.
 *
 * These helpers mirror the OpenAPI record schema and add convenience builders for S2 command records:
 * - `make` creates a normal record
 * - `command` creates a command record with an empty-name header set to the command name
 * - `fence` is a command record enforcing a fencing token
 * - `trim` is a command record that encodes a sequence number for trimming
 */
export declare const AppendRecord: {
    readonly make: typeof appendRecordMake;
    readonly command: typeof appendRecordCommand;
    readonly fence: (fencing_token: string, timestamp?: number) => AppendRecord;
    readonly trim: (seqNum: number | bigint, timestamp?: number) => AppendRecord;
};
/**
 * Calculate the UTF-8 byte length of a string.
 * Handles all Unicode characters including surrogate pairs correctly.
 *
 * @param str The string to measure
 * @returns The byte length when encoded as UTF-8
 */
export declare function utf8ByteLength(str: string): number;
/**
 * Calculate the metered size in bytes of an AppendRecord.
 * This includes the body and headers, but not metadata like timestamp.
 *
 * This function calculates how many bytes the record will occupy
 * after being received and deserialized as raw bytes on the S2 side.
 * For strings, it calculates UTF-8 byte length. For Uint8Array, it uses
 * the array length directly (same value as would be used when encoding
 * to base64 for transmission).
 *
 * @param record The record to measure
 * @returns The size in bytes
 */
export declare function meteredSizeBytes(record: AppendRecord): number;
export declare function computeAppendRecordFormat(record: AppendRecord): "string" | "bytes";
export {};
//# sourceMappingURL=utils.d.ts.map